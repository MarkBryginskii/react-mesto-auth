{"version":3,"sources":["components/images/header-logo.svg","components/ProtectedRoute.js","components/Header.js","components/Register.js","components/Login.js","components/InfoTooltip.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/Api.js","utils/Auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","ProtectedRoute","children","props","loggedIn","to","Header","className","href","src","logo","alt","path","exact","userInfo","onClick","onLogoff","withRouter","emailRef","React","useRef","passwordRef","defaultValue","ref","id","type","name","placeholder","required","e","preventDefault","onSubmit","email","current","value","password","InfoTooltip","isOpen","noValidate","onClose","regSuccess","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","CurrentUserContext","createContext","Card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","onCardDelete","link","onCardClick","onCardLike","length","Main","avatar","onEditAvatarClick","onEditProfileClick","about","onAddPlaceClick","cards","map","card","onCardLikeClick","onCardDeleteClick","key","Footer","ImagePopup","PopupWithForm","popupSize","title","EditProfilePopup","useState","setName","description","setDescription","useEffect","onChange","event","target","data-field-name","autoFocus","minLength","maxLength","onUpdateUser","EditAvatarPopup","avatarRef","onUpdateAvatar","AddPlacePopup","setLink","onAddCard","appApi","options","this","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","handleOriginalResponse","body","JSON","stringify","newCard","cardId","authorization","appAuth","_endPoint","endPoint","obj","signup","data","signin","localStorage","setItem","token","jwt","user","default","App","history","useHistory","setCurrentUser","isLoggedIn","setIsloggedIn","isUserEmail","setIsUserEmail","isInfoTooltipOpen","setInfoTooltipOpen","isAuthSuccess","setIsAuthSuccess","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isImagePopupOpen","setIsImagePopupOpen","setCards","getItem","userData","push","catch","err","console","log","getUserInfo","getInitialCards","selectedCard","setSelectedCard","closeAllPopups","Provider","removeItem","register","error","login","message","removeCardLike","addCardLike","newCards","c","deleteCard","filter","setUserAvatar","setUserInfo","addCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.61591de9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header-logo.c6f11019.svg\";","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ children, ...props }) => {\n  return <Route>{() => (props.loggedIn ? children : <Redirect to='./sign-in' />)}</Route>;\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { Route, Switch, Link } from 'react-router-dom';\n\nconst Header = (props) => {\n\n  return (\n  <header className=\"header\">\n    <a href=\"https://markbryginskii.github.io/react-mesto-auth/index.html\"><img className=\"header__logo\" src={props.logo} alt=\"Место\" /></a>\n    <div className=\"header__login-container\">\n      <Switch>\n        <Route path=\"/sign-up\">\n          <Link className='header__link header__link_white' to='/sign-in'>Войти</Link>\n        </Route>\n        <Route path=\"/sign-in\">\n          <Link className='header__link header__link_white' to='/sign-up'>Регистрация</Link>\n        </Route>\n        <Route exact path=\"/\">\n          <p className='header__user-email'>{props.userInfo}</p>\n          <Link onClick={props.onLogoff} className='header__link header__link_gray' to='/sign-in'>Выйти</Link>\n        </Route>\n      </Switch>\n    </div>\n  </header>);\n}\n\nexport default Header;\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\n\nconst Register = (props) => {\n\n  const emailRef = React.useRef();\n  const passwordRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onSubmit({\n      email: emailRef.current.value,\n      password: passwordRef.current.value\n    });\n  }\n\n  return (\n    <section className=\"auth\">\n      <form className=\"auth auth__form\">\n        <h2 className=\"auth__title\">Регистрация</h2>\n        <input defaultValue='' ref={emailRef} className=\"auth__text-field\" id=\"auth__user-email\" type='email' name='email' placeholder=\"Email\" required></input>\n        <input defaultValue='' ref={passwordRef} className=\"auth__text-field\" id=\"auth__user-password\" type='password' name='password' placeholder=\"Пароль\" required></input>\n        <button onClick={handleSubmit} className=\"auth__submit-button\" type='submit'>Зарегистрироваться</button>\n        <Link className=\"auth__login-link\" to='/sign-in'>Уже зарегистрированы? Войти</Link>\n      </form>\n    </section>\n  );\n}\n\nexport default withRouter(Register);\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst Login = (props) => {\n\n  const emailRef = React.useRef();\n  const passwordRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onSubmit({\n      email: emailRef.current.value,\n      password: passwordRef.current.value\n    });\n  }\n\n  return (\n    <section className=\"auth\">\n      <form className=\"auth auth__form\">\n        <h2 className=\"auth__title\">Вход</h2>\n        <input defaultValue='' ref={emailRef} className=\"auth__text-field\" id=\"auth__user-email\" type='email' name='email' placeholder=\"Email\" required></input>\n        <input defaultValue='' ref={passwordRef} className=\"auth__text-field\" id=\"auth__user-password\" type='password' name='password' placeholder=\"Пароль\" required></input>\n        <button onClick={handleSubmit} className=\"auth__submit-button\" type='submit'>Войти</button>\n      </form>\n    </section>\n  );\n}\n\nexport default withRouter(Login);\n","import React from 'react';\n\nconst InfoTooltip = (props) => {\n\n  return (\n    <form id='popupInfoTooltip' className={`popup popup_half-transparent ${props.isOpen && 'popup_opened' }`} noValidate>\n      <div className={`popup__form-container popup__form-container_small`}>\n        <button onClick={props.onClose} type=\"reset\" className=\"popup__close-button\" value=\"\" />\n        {props.regSuccess ?\n          (<svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M117 60C117 91.4802 91.4802 117 60 117C28.5198 117 3 91.4802 3 60C3 28.5198 28.5198 3 60 3C91.4802 3 117 28.5198 117 60ZM120 60C120 93.1371 93.1371 120 60 120C26.8629 120 0 93.1371 0 60C0 26.8629 26.8629 0 60 0C93.1371 0 120 26.8629 120 60ZM57.5502 76.888L86.7676 48.888L81.2324 43.112L54.4277 68.7999L39.3496 57.8561L34.6504 64.3305L52.433 77.2372L55.1375 79.2001L57.5502 76.888Z\" fill=\"black\"/>\n          </svg>)\n          :\n          (<svg width=\"120\" height=\"120\" viewBox=\"0 0 120 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M60 117C91.4802 117 117 91.4802 117 60C117 28.5198 91.4802 3 60 3C28.5198 3 3 28.5198 3 60C3 91.4802 28.5198 117 60 117ZM60 120C93.1371 120 120 93.1371 120 60C120 26.8629 93.1371 0 60 0C26.8629 0 0 26.8629 0 60C0 93.1371 26.8629 120 60 120ZM55.0503 60.707L36.6655 42.3223L42.3224 36.6654L60.7071 55.0502L78.3848 37.3726L84.0416 43.0294L66.364 60.707L83.3346 77.6776L77.6777 83.3345L60.7071 66.3639L43.0294 84.0416L37.3726 78.3848L55.0503 60.707Z\" fill=\"#FD0707\"/>\n          </svg>)}\n        {props.regSuccess ?\n          (<h2 className=\"popup__title popup__title_middle\">Вы успешно зарегистрировались!</h2>)\n          :\n          (<h2 className=\"popup__title popup__title_middle\">Что-то пошло не так! Попробуйте ещё раз.</h2>)}\n      </div>\n    </form>\n  );\n}\n\nexport default InfoTooltip;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nconst Card = (props) => {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const handleClick = () => {\n    props.onCardClick(props);\n  }\n\n  const handleLikeClick = () => {\n    props.onCardLike(props);\n  }\n\n  const handleLikeDelete = () => {\n    props.onCardDelete(props);\n  }\n\n  const isOwn = props.owner._id === currentUser._id;\n  const isLiked = props.likes.some(i => i._id === currentUser._id);\n\n  return(\n    <li className=\"photo-card\">\n      <button type=\"button\" onClick={handleLikeDelete} className={`photo-card__trash-icon ${!isOwn && 'photo-card__trash-icon_hide'}`} value=\"\" />\n      <img className=\"photo-card__image\" src={props.link} alt={props.name} onClick={handleClick}/>\n      <div className=\"photo-card__footer\">\n        <h3 className=\"photo-card__title\">{props.name}</h3>\n          <div className=\"photo-card__like-container\">\n            <button type=\"button\" onClick={handleLikeClick} className={`photo-card__like-icon ${isLiked && 'photo-card__like-icon_active'}`} />\n            <p className=\"photo-card__like-counter\">{props.likes.length}</p>\n          </div>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card.js';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nconst Main = (props) => {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img className=\"profile__avatar\" alt=\"аватар\" src={currentUser.avatar} />\n          <button onClick={props.onEditAvatarClick} type=\"button\" className=\"profile__avatar-edit-button\" />\n        </div>\n          <div className=\"profile__info\">\n            <div className=\"profile__info-row\">\n              <p className=\"profile__user-name\">{currentUser.name}</p>\n              <button onClick={props.onEditProfileClick} type=\"button\" className=\"profile__edit-button\" />\n            </div>\n            <p className=\"profile__user-about\">{currentUser.about}</p>\n          </div>\n        <button onClick={props.onAddPlaceClick} type=\"button\" className=\"profile__add-button\" />\n      </section>\n      <section className=\"photo-grid\">\n        <ul className=\"photo-cards\">\n          {props.cards.map(card => <Card onCardClick={props.onCardClick} onCardLike={props.onCardLikeClick} onCardDelete={props.onCardDeleteClick} key={card._id} {...card} />)}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nconst ImagePopup = (props) => {\n\n  return(\n    <div id=\"popupIncreasePhoto\" className={`popup popup_min-transparent ${props.card && 'popup_opened'}`}>\n      <div className=\"popup__image-container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\n        <img className=\"popup__image\" src={props.card && props.card.link} alt={props.card && props.card.name} />\n        <figure className=\"popup__image-figure\">{props.card && props.card.name}</figure>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nconst PopupWithForm = (props) => {\n\n  return (\n    <form id={`popup${props.name}`} onSubmit={props.onSubmit} className={`popup popup_half-transparent ${props.isOpen && 'popup_opened' }`} noValidate>\n      <div className={`popup__form-container popup__form-container_${props.popupSize}`}>\n        <button onClick={props.onClose} type=\"reset\" className=\"popup__close-button\" value=\"\" />\n        <h2 className=\"popup__title\">{props.title}</h2>\n        {props.children}\n      </div>\n    </form>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nconst EditProfilePopup = (props) => {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  const handleName = (event) => {\n    setName(event.target.value);\n  }\n\n  const handleDescription = (event) => {\n    setDescription(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return(\n    <PopupWithForm name=\"EditProfile\" title=\"Редактировать профиль\" popupSize=\"large\" isOpen={props.isOpen} onClose={props.onClose}>\n      <div className=\"popup__input-container\">\n        <input onChange={handleName} defaultValue={name} data-field-name=\"name\" id=\"popup__user-name\" type=\"text\" className=\"popup__text-field\" autoFocus placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\" required />\n        <span id=\"popup__user-name-error\" className=\"popup__input-error\" />\n      </div>\n      <div className=\"popup__input-container\">\n        <input onChange={handleDescription} defaultValue={description} data-field-name=\"about\" id=\"popup__user-about\" type=\"text\" className=\"popup__text-field\" placeholder=\"О себе\" minLength=\"2\" maxLength=\"200\" required />\n        <span id=\"popup__user-about-error\" className=\"popup__input-error\" />\n      </div>\n      <button type=\"submit\" onClick={handleSubmit} className=\"popup__save-button\">Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nconst EditAvatarPopup = (props) => {\n\n  const avatarRef = React.useRef();\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n  }\n\n  return(\n    <PopupWithForm name=\"EditAvatar\" title=\"Обновить аватар\" popupSize=\"medium\" isOpen={props.isOpen} onClose={props.onClose}>\n      <div className=\"popup__input-container\">\n        <input defaultValue='' ref={avatarRef} data-field-name=\"avatar\" id=\"popup__avatar-link\" type=\"url\" className=\"popup__text-field\" placeholder=\"Ссылка на картинку\" required />\n        <span id=\"popup__avatar-link-error\" className=\"popup__input-error\" />\n      </div>\n      <button type=\"submit\" onClick={handleSubmit} className=\"popup__save-button\">Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nconst AddPlacePopup = (props) => {\n\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  const handleName = (event) => {\n    setName(event.target.value);\n  }\n\n  const handleLink = (event) => {\n    setLink(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    props.onAddCard({\n      name,\n      link,\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"AddPhoto\" title=\"Новое место\" popupSize=\"large\" isOpen={props.isOpen} onClose={props.onClose}>\n      <div className=\"popup__input-container\">\n        <input defaultValue='' onChange={handleName} data-field-name=\"name\" id=\"popup__card-name\" type=\"text\" className=\"popup__text-field\" autoFocus placeholder=\"Название\" minLength=\"1\" maxLength=\"30\" required />\n        <span id=\"popup__card-name-error\" className=\"popup__input-error\" />\n      </div>\n      <div className=\"popup__input-container\">\n        <input defaultValue='' onChange={handleLink} data-field-name=\"link\" id=\"popup__card-link\" type=\"url\" className=\"popup__text-field\" placeholder=\"Ссылка на картинку\" required />\n        <span id=\"popup__card-link-error\" className=\"popup__input-error\" />\n      </div>\n      <button type=\"submit\" onClick={handleSubmit} className=\"popup__save-button\">Создать</button>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  handleOriginalResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error : ${res.status}`);\n  }\n\n  getInitialCards() {\n    return fetch(this._baseUrl + \"/cards\", {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"GET\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  setUserInfo(userInfo) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: userInfo.name,\n        about: userInfo.about,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  setUserAvatar(userInfo) {\n    return fetch(this._baseUrl + \"/users/me/avatar\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: userInfo.avatar,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  addCard(newCard) {\n    return fetch(this._baseUrl + \"/cards\", {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: newCard.name,\n        link: newCard.link,\n      }),\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  deleteCard(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  addCardLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/likes/\" + cardId, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n\n  removeCardLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/likes/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then((res) => this.handleOriginalResponse(res));\n  }\n}\n\nconst appApi = new Api({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-14\",\n  headers: {\n    authorization: \"aa78f1a9-4e3b-428a-a9f7-5265cbc9b3da\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default appApi;\n\n","class Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._endPoint = options.endPoint;\n  }\n\n  register(obj) {\n    return fetch(this._baseUrl + this._endPoint.signup, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'},\n      body: JSON.stringify({\n        \"email\": obj.email,\n        \"password\": obj.password,\n      })\n    })\n    .then((res) => { return res.json(); })\n    .then((data) => { return data })\n  }\n\n  login(obj) {\n    return fetch(this._baseUrl + this._endPoint.signin, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'},\n      body: JSON.stringify({\n        \"email\": obj.email,\n        \"password\": obj.password,\n      })\n    })\n    .then((res) => {\n      return res.json();\n    })\n    .then((data) => {\n      localStorage.setItem('jwt', data.token);\n      return data;\n    })\n  }\n\n  userInfo(jwt) {\n    return fetch(this._baseUrl + this._endPoint.user, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization' : `Bearer ${jwt}`\n      }\n    })\n    .then((res) => { return res.json(); })\n    .then((data) => { return data })\n  }\n}\n\nconst appAuth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  endPoint: {\n    default: '/',\n    user: '/users/me',\n    signup: '/signup',\n    signin: '/signin',\n  }\n});\n\nexport default appAuth;\n","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport logo from './images/header-logo.svg';\nimport Header from './Header.js';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup';\n\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup';\n\nimport appApi from '../utils/Api.js';\nimport appAuth from '../utils/Auth.js';\n\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nconst App = () => {\n\n  let history = useHistory();\n\n  const [currentUser, setCurrentUser] = React.useState('');\n\n  const [isLoggedIn, setIsloggedIn] = React.useState(false);\n  const [isUserEmail, setIsUserEmail] = React.useState('');\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const [isAuthSuccess, setIsAuthSuccess] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect( () => {\n    if(localStorage.getItem('jwt')) {\n      appAuth.userInfo(localStorage.getItem('jwt'))\n      .then((userData) => {\n        setIsloggedIn(true);\n        setIsUserEmail(userData.data.email);\n        history.push('/');\n      })\n      .catch((err) => {console.log(err)});\n    }\n    appApi.getUserInfo()\n    .then((userData) => {\n        setCurrentUser(userData);\n      });\n  }, [history]);\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    (isLiked ? appApi.removeCardLike(card._id) : appApi.addCardLike(card._id))\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    });\n  }\n\n  const handleCardDelete = (card) => {\n    appApi.deleteCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    });\n  }\n\n  React.useEffect( () => {\n    appApi.getInitialCards()\n    .then((cards) => {\n      setCards(cards);\n      });\n    }, []);\n\n  const [selectedCard, setSelectedCard] = React.useState();\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setInfoTooltipOpen(false);\n    setSelectedCard(null);\n  }\n\n  const handleUpdateUser = ({name, about}) => {\n    appApi.setUserInfo({name, about})\n    .then((userData) => {\n      setCurrentUser(userData);})\n      .then(() => {closeAllPopups()});\n  }\n\n  const handleUpdateAvatar = ({avatar}) => {\n    appApi.setUserAvatar({avatar})\n    .then((userData) => {\n      setCurrentUser(userData);})\n      .then(() => {closeAllPopups()});\n  }\n\n  const handleAddPlaceSubmit = ({name, link}) => {\n    appApi.addCard({name, link})\n    .then((newCard) => {\n      setCards([...cards, newCard]);\n    })\n    .then(() => {closeAllPopups()});\n  }\n\n  const handleRegister = (obj) => {\n    appAuth.register(obj)\n    .then((res) => {\n      if(!res.error) {\n        setIsAuthSuccess(true);\n        setInfoTooltipOpen(true);\n        history.push('/sign-in');\n      } else {\n        console.log(res.error);\n        setIsAuthSuccess(false);\n        setInfoTooltipOpen(true);\n      }\n    })\n  }\n\n  const handleLogin = (obj) => {\n    appAuth.login(obj)\n    .then((res) => {\n      if(res.token) {\n        setIsloggedIn(true);\n        history.push('/');\n      } else {\n        console.log(res.message);\n        setIsAuthSuccess(false);\n        setInfoTooltipOpen(true);\n      }\n    })\n  }\n\n  function handleLogoff() {\n    localStorage.removeItem('jwt');\n    setIsloggedIn(false);\n    history.push('/sign-in');\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <Header logo={logo} onLogoff={handleLogoff} userInfo={isUserEmail}/>\n          <Switch>\n            <Route path=\"/sign-up\">\n              <Register onSubmit={handleRegister} />\n            </Route>\n            <Route path=\"/sign-in\">\n              <Login onSubmit={handleLogin} />\n            </Route>\n            <ProtectedRoute path='/' loggedIn={isLoggedIn}>\n              <Main\n                onEditAvatarClick={handleEditAvatarClick}\n                onEditProfileClick={handleEditProfileClick}\n                onAddPlaceClick={handleAddPlaceClick}\n                cards={cards}\n                onCardClick={handleCardClick}\n                onCardLikeClick={handleCardLike}\n                onCardDeleteClick={handleCardDelete}\n              />\n              <Footer />\n              <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n              <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n              <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddCard={handleAddPlaceSubmit}/>\n              <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups} />\n            </ProtectedRoute>\n          </Switch>\n        <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} regSuccess={isAuthSuccess} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './components/index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}